!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).SharedUtils={})}(this,function(e){"use strict";function n(e){console.error("[BScroll warn]: "+e)}var i="undefined"!=typeof window,t=i&&navigator.userAgent.toLowerCase(),r=t&&/wechatdevtools/.test(t),o=t&&0<t.indexOf("android");function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0;i<t.length;i++){var r=t[i];for(var o in r)e[o]=r[o]}return e}var s=i&&document.createElement("div").style,a=function(){if(!i)return!1;var e={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var t in e)if(void 0!==s[e[t]])return t;return!1}();function c(e){return!1===a?e:"standard"===a?"transitionEnd"===e?"transitionend":e:a+e.charAt(0).toUpperCase()+e.substr(1)}function u(e,t,n,i){e.addEventListener(t,n,{passive:!1,capture:!!i})}function p(e,t,n,i){e.removeEventListener(t,n,{capture:!!i})}var v=a&&"standard"!==a?"-"+a.toLowerCase()+"-":"",h=c("transform"),d=c("transition"),l=i&&c("perspective")in s,m=i&&("ontouchstart"in window||r),y=i&&d in s,w={transform:h,transition:d,transitionTimingFunction:c("transitionTimingFunction"),transitionDuration:c("transitionDuration"),transitionDelay:c("transitionDelay"),transformOrigin:c("transformOrigin"),transitionEnd:c("transitionEnd")};function g(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}var E=g;function b(e,t){var n;void 0===t&&(t="click"),"mouseup"===e.type?n=e:"touchend"!==e.type&&"touchcancel"!==e.type||(n=e.changedTouches[0]);var i,r={};n&&(r.screenX=n.screenX||0,r.screenY=n.screenY||0,r.clientX=n.clientX||0,r.clientY=n.clientY||0);var o=!0,s=!0;if("undefined"!=typeof MouseEvent)try{i=new MouseEvent(t,f({bubbles:o,cancelable:s},r))}catch(e){a()}else a();function a(){(i=document.createEvent("Event")).initEvent(t,o,s),f(i,r)}i.forwardedTouchEvent=!0,i._constructed=!0,e.target.dispatchEvent(i)}function T(e,t){t.parentNode.insertBefore(e,t)}function O(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}var C=i&&window;function D(){}function F(e){}var M=i?C.requestAnimationFrame||C.webkitRequestAnimationFrame||C.mozRequestAnimationFrame||C.oRequestAnimationFrame||function(e){return window.setTimeout(e,(e.interval||100/60)/2)}:D,A=i?C.cancelAnimationFrame||C.webkitCancelAnimationFrame||C.mozCancelAnimationFrame||C.oCancelAnimationFrame||function(e){window.clearTimeout(e)}:D,x={enumerable:!0,configurable:!0,get:F,set:F};var k=(R.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},R.prototype.once=function(n,i,r){var o=this;void 0===r&&(r=this),this.hasType(n);var s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.off(n,s),i.apply(r,e)};return s.fn=i,this.on(n,s),this},R.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},R.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var r,o=i.length,s=i.slice(),a=0;a<o;a++){var f=s[a],c=f[0],u=f[1];if(c&&!0===(r=c.apply(u,t)))return r}},R.prototype.registerType=function(e){var t=this;e.forEach(function(e){t.eventTypes[e]=e})},R.prototype.destroy=function(){this.events={},this.eventTypes={}},R.prototype.hasType=function(e){var t=this.eventTypes;t[e]===e||n('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(t).map(function(e){return JSON.stringify(e)})+"]")},R);function R(e){this.events={},this.eventTypes={},this.registerType(e)}var j=(B.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},B.prototype.addDOMEvents=function(){this.handleDOMEvents(u)},B.prototype.removeDOMEvents=function(){this.handleDOMEvents(p)},B.prototype.handleDOMEvents=function(t){var n=this,i=this.wrapper;this.events.forEach(function(e){t(i,e.name,n,!!e.capture)})},B.prototype.handleEvent=function(t){var n=t.type;this.events.some(function(e){return e.name===n&&(e.handler(t),!0)})},B);function B(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}e.EventEmitter=k,e.EventRegister=j,e.addClass=function(e,t){if(!O(e,t)){var n=e.className.split(" ");n.push(t),e.className=n.join(" ")}},e.addEvent=u,e.assert=function(e,t){if(!e)throw new Error("[BScroll] "+t)},e.before=T,e.cancelAnimationFrame=A,e.click=b,e.cssVendor=v,e.dblclick=function(e){b(e,"dblclick")},e.ease={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(e){return 1+--e*e*e*e*e}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},e.eventTypeMap={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2},e.extend=f,e.fixInboundValue=function(e,t,n){return e<t?t:n<e?n:e},e.getDistance=function(e,t){return Math.sqrt(e*e+t*t)},e.getElement=function(e){return"string"==typeof e?document.querySelector(e):e},e.getNow=function(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date},e.getRect=function(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}},e.hasClass=O,e.hasPerspective=l,e.hasTouch=m,e.hasTransition=y,e.inBrowser=i,e.isAndroid=o,e.isPlainObject=function(e){return"object"==typeof e&&null!==e},e.isUndef=function(e){return null==e},e.isWeChatDevTools=r,e.offset=function(e){for(var t=0,n=0;e;)t-=e.offsetLeft,n-=e.offsetTop,e=e.offsetParent;return{left:t,top:n}},e.offsetToBody=function(e){var t=e.getBoundingClientRect();return{left:-(t.left+window.pageXOffset),top:-(t.top+window.pageYOffset)}},e.prepend=function(e,t){var n=t.firstChild;n?T(e,n):t.appendChild(e)},e.preventDefaultExceptionFn=g,e.propertiesProxy=function(e,t,n){x.get=function(){return function(e,t){for(var n=t.split("."),i=0;i<n.length-1;i++)if("object"!=typeof(e=e[n[i]])||!e)return;var r=n.pop();return"function"==typeof e[r]?function(){return e[r].apply(e,arguments)}:e[r]}(this,t)},x.set=function(e){!function(e,t,n){for(var i,r=t.split("."),o=0;o<r.length-1;o++)e[i=r[o]]||(e[i]={}),e=e[i];e[r.pop()]=n}(this,t,e)},Object.defineProperty(e,n,x)},e.removeChild=function(e,t){e.removeChild(t)},e.removeClass=function(e,t){if(O(e,t)){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n," ")}},e.removeEvent=p,e.requestAnimationFrame=M,e.style=w,e.tagExceptionFn=E,e.tap=function(e,t){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)},e.ua=t,e.warn=n,Object.defineProperty(e,"__esModule",{value:!0})});
